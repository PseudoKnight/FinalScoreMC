# Put whatever they have in their hand onto their head. This shouldn't dupe.
*:/hat = >>>
	if(!is_null(pinv(player(), 103))) {
		die(color('gold').'You already have something on your head.');
	}
	@item = pinv(player(), null);
	if(is_null(@item)) {
		die(color('gold').'You need to hold something before you can put it on your head.');
	}
	@excluded = array();
	if(array_contains(@excluded, @item['name'])) {
		die(color('gold').'That item cannot be put on your head without losing data tags.');
	}
	if(@item['qty'] == 1) {
		set_pinv(player(), array(null: null, 103: @item));
	} else {
		@item['qty'] -= 1;
		@hat = @item[];
		@hat['qty'] = 1;
		set_pinv(player(), array(null: @item, 103: @hat));
	}
	@loc = ploc();
	play_sound(@loc, array('sound': 'CHICKEN_EGG_POP'));
	play_effect(_relative(@loc, 'up', 2.7), 'CLOUD', array(
		'particleCount': 10,
		'offsetX': 0.5,
		'offsetY': 0.5,
		'offsetZ': 0.5,
		'speed': 0)
	);
	@messages = array('Fancy!', 'Stylin\'!', 'Groovy!', 'Lookin\' good!', 'Tasteful!', 'Awesome!', 'Rad!', 'Cool!');
	title_msg(null, color(6).array_rand(@messages, 1, false)[0], 10, 40, 10);
<<<
