*:/compass = >>>
	msg('Set your compass target to a specific location.\n'
		.'Available targets: here, spawn, home (yours or others), players, or coordinates.\n'
		.'Usage: /compass [here|spawn|home [player]|playerName|x z]\n'
		.'Example: /compass home PseudoKnight\n'
		.'Example: /compass -100 150');
<<<

*:/compass $target [$arg] = >>>
	switch($target) {
		case 'spawn':
			set_compass_target(get_spawn());
			msg('Compass is now pointing to '._worldname(pworld()).'\'s spawn.');

		case 'home':
			if($arg) {
				@pdata = _pdata($arg);
			} else {
				@pdata = _pdata(player());
			}
			if(!array_index_exists(@pdata, 'homes'), die('No home to target.'));
			if(!array_index_exists(@pdata['homes'], pworld()), die('No home in this world to target.'));
			set_compass_target(@pdata['homes'][pworld()]);
			msg('Compass is now pointing to '.if($arg, $arg.'\'s', 'your').' home.');

		case 'here':
			set_compass_target(ploc());
			msg('Compass is now pointing to this location.');

		default:
			try {
				@player = player($target);
				if(pworld(@player) != pworld(), die('Player is not in this world.'));
				set_compass_target(ploc(@player));
				msg('Compass is now pointing to '.@player.'\'s last location.');
			} catch(PlayerOfflineException @ex) {
				if(is_numeric($target) && is_numeric($arg)) {
					set_compass_target(array($target, 0, $arg, pworld()));
					msg('Compass is now pointing to x:'.$target.' z:'.$arg);
				}
			}
	}
<<<
