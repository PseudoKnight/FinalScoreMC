# Add an item into your inventory in the next available slot.
*:/i [$item=0] [$amount=1] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	if($item == 0, die('Usage: /i [id:data] [quantity] '.color(gray).'(supports item names)'))
	@item = split(':', $item)
	if(!is_numeric(@item[0]), @item[0] = data_values(@item[0]))
	if(is_null(@item[0]), die('Unknown item name'))
	if(array_size(@item) == 1, @item[1] = 0)
	if(!is_integral($amount) || $amount < 1, die('Amount must be a positive integer.'))
	try(
		pgive_item(@item[0].':'.@item[1], $amount)
		msg(color('yellow').'You\'ve been given '.$amount.' '.data_name(@item[0].':'.@item[1]).'.')
	, # catch
		msg(color('red').'That item doesn\'t appear to exist.')
	)
<<<

# Set the display name for the item in-hand
*:/display [$] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	if(!$, die(color(gold).'Usage: /display <item display name> '.color(gray).'(supports &0 color codes)'))
	@meta = get_itemmeta(null)
	if(is_null(@meta), @meta = associative_array())
	@meta['display'] = colorize($)
	set_itemmeta(null, @meta)
<<<

# Enchant tool in hand with specified enchantment
*:/enchant [$type='list'] [$level=1] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	# enchantment aliases
	@enchants = array(
		'power': 'ARROW_DAMAGE',
		'flame': 'ARROW_FIRE',
		'infinity': 'ARROW_INFINITE',
		'punch': 'ARROW_KNOCKBACK',
		'sharpness': 'DAMAGE_ALL',
		'baneofarthropods': 'DAMAGE_ARTHROPODS',
		'smite': 'DAMAGE_UNDEAD',
		'efficiency': 'DIG_SPEED',
		'unbreaking': 'DURABILITY',
		'fireaspect': 'FIRE_ASPECT',
		'knockback': 'KNOCKBACK',
		'fortune': 'LOOT_BONUS_BLOCKS',
		'looting': 'LOOT_BONUS_MOBS',
		'respiration': 'OXYGEN',
		'protection': 'PROTECTION_ENVIRONMENTAL',
		'blastprotection': 'PROTECTION_EXPLOSIONS',
		'featherfalling': 'PROTECTION_FALL',
		'fireprotection': 'PROTECTION_FIRE',
		'projectileprotection': 'PROTECTION_PROJECTILE',
		'silktouch': 'SILK_TOUCH',
		'thorns': 'THORNS',
		'aquaaffinity': 'WATER_WORKER',
		'depthstrider': 'DEPTH_STRIDER',
	)
	if(!is_integral($level), die('Enchantment level must be an integer.'))
	if(array_index_exists(@enchants, to_lower($type))) {
		enchant_inv_unsafe(null, @enchants[to_lower($type)], $level)
	} else {
		msg(color('red').'Available enchantments: '.array_keys(@enchants))
	}
<<<

# Remove all enchantments from item in hand
*:/unenchant = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	@item = pinv(player(), null)
	array_remove(@item, 'enchants')
	array_remove(@item[meta], 'enchants')
	set_pinv(array(null: @item))
<<<

# Set individual lines of lore for the item in-hand
*:/lore [$line] [$] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	if(!$ || !is_numeric($line) || $line < 1) {
		die(color('gold').'Usage: /lore <line#> <lore string> '.color('gray').'(supports &0 color codes)');
	}
	@meta = get_itemmeta(null);
	if(is_null(@meta), @meta = associative_array())
	if(is_null(@meta['lore'])) {
		@meta['lore'] = array();
	}
	@meta['lore'][$line - 1] = colorize($);
	set_itemmeta(null, @meta);
<<<	

# Spawn player head
*:/skull [$player] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	if($player) {
		pgive_item(player(), '397:3', 1, array('owner': $player));
		die();
	}
	
	if(extension_exists('CHVirtualChests')) {
	if(!array_contains(all_virtualchests(), 'skulls')) {
		@skulls = array(
			'id': 'skulls',
			'title': 'Choose a Skull',
			'size': 45,
			0: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Burger',
					'owner': 'glorycraft'
				),
			),
			1: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Globe',
					'owner': 'Mapparere'
				),
			),
			2: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'TV',
					'owner': 'uioz'
				),
			),
			3: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Cake',
					'owner': 'MHF_Cake'
				),
			),
			4: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Exclamation Box',
					'owner': 'MHF_Exclamation'
				),
			),
			5: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Question Box',
					'owner': 'MHF_Question'
				),
			),
			6: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Chest',
					'owner': 'MHF_Chest'
				),
			),
			7: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Jukebox',
					'owner': 'C418'
				),
			),
			8: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Old Fashioned Camera',
					'owner': '3i5g00d'
				),
			),
			9: array(
				'type': 397, 'data': 3,	'meta': array(
					'display': 'Jack O\' Lantern',
					'owner': 'Koebasti'
				),
			),
			10: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Cactus',
					'owner': 'LaxPride'
				),
			),
			11: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Leaves',
					'owner': 'rsfx'
				),
			),
			12: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Fish181',
					'owner': 'Aquarium'
				),
			),
			13: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Clock',
					'owner': 'Olaf_C'
				),
			),
			14: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Stone',
					'owner': 'robbydeezle'
				),
			),
			15: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'TNT',
					'owner': 'HCTNT'
				),
			),
			16: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Dispenser',
					'owner': 'scemm'
				),
			),
			17: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Piston',
					'owner': 'JL2579'
				),
			),
			18: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Diamond Ore',
					'owner': 'akaBruce'
				),
			),
			19: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Redstone Ore',
					'owner': 'annayirb'
				),
			),
			20: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Emerald Ore',
					'owner': 'Tereneckla'
				),
			),
			21: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Sponge',
					'owner': 'pomi44'
				),
			),
			22: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Haybale',
					'owner': 'Bendablob'
				),
			),
			23: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Camera',
					'owner': 'jorgenskar95'
				),
			),
			24: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Computer',
					'owner': 'Addelburgh'
				),
			),
			25: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Gold Block',
					'owner': 'teachdaire'
				),
			),
			26: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Iron Block',
					'owner': 'metalhedd'
				),
			),
			27: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Obsidian',
					'owner': 'loiwiol'
				),
			),
			28: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Books',
					'owner': 'CS001'
				),
			),
			29: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Sand',
					'owner': 'rugofluk'
				),
			),
			30: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Toilet Paper Roll',
					'owner': 'OrtyBortorty'
				),
			),
			31: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Popcorn',
					'owner': 'ZachWarnerHD'
				),
			),
			32: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Cupcake',
					'owner': 'ChoclateMuffin'
				),
			),
			33: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Hamburger',
					'owner': 'food'
				),
			),
			34: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Netherrack',
					'owner': 'Numba_one_Stunna'
				),
			),
			35: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Computer',
					'owner': 'CoderPuppy'
				),
			),
			36: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'TV',
					'owner': 'sysfailure'
				),
			),
			37: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Ender Eye',
					'owner': 'Edna_I'
				),
			),
			38: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Apple',
					'owner': 'KylexDavis'
				),
			),
			39: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Toaster',
					'owner': 'zEl3M3nTz'
				),
			),
			40: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Green Gift',
					'owner': 'SeerPotion'
				),
			),
			41: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Red Gift',
					'owner': 'CruXXx'
				),
			),
			42: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Dice',
					'owner': 'SquareHD'
				),
			),
			43: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Snowman',
					'owner': 'Snowman_7'
				),
			),
			44: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'Chimney Top',
					'owner': 'The_Wither_Boss'
				),
			),
			45: array(
				'type': 397, 'data': 3, 'meta': array(
					'display': 'GameCube',
					'owner': 'Eien15'
				),
			),
		);
		create_virtualchest(@skulls);
	}
	popen_virtualchest('skulls');
	msg('Please do not rely too heavily upon these, as many are subject to change.');
	if(!has_bind(player().'-skulls-click')) {
		bind('inventory_click', array('id': player().'-skulls-click'), array('slottype': 'CONTAINER', 'player': player()), @e) {
			if(pget_virtualchest() === 'skulls' && pmode() === 'CREATIVE') {
				if(@e['slotitem']) {
					pgive_item(player(), '397:3', 1, @e['slotitem']['meta']);
				}
			}
		}
		bind('inventory_close', null, array('player': player()), @e) {
			unbind(player().'-skulls-click');
			unbind();
		}
	}
	}
<<<

# Dye leather armor in-hand with the specified R G B values (0 - 255)
*:/dye [$r] [$g] [$b] = >>>
	if(pmode() !== 'CREATIVE', die('You\'re not in creative mode.'));
	if(!$b, die(color(gold).'Usage: /dye <red#> <green#> <blue#> '.color(gray).'(0 - 255)'))
	try(
		set_armor_color(pinfo(player(), 15), array(min(max($r, 0), 255), min(max($g, 0), 255), min(max($b, 0), 255)))
	, # catch
		die(color(gold).'Hold leather armor in your hand and type the command. eg. /dye 255 255 255')
	)
<<<

# Create potions or add potion effects to existing potions
*:/potion [$id] [$seconds = 30] [$strength = 1] = >>>
	if(pmode() !== 'CREATIVE') {
		die('You\'re not in creative mode.');
	}
	if(!$id) {
		die('Usage: /potion <potionEffect> <seconds> <strength>');
	}
	
	@effects = _get_effects();
	@id = $id;
	if(!is_numeric(@id)) {
		if(!array_index_exists(@effects, @id)) {
			die('Available potion effects: '.@effects);
		}
		@id = @effects[@id];
	}
	
	@item = pinv(player(), null);
	if(@item && @item['type'] == 373) { # add potion effecs to potion
		if(is_null(@item['meta'])) {
			@item['meta'] = associative_array();
		}
		if(!array_index_exists(@item['meta'], 'potions')) {
			@item['meta']['potions'] = array();
		}
		@item['meta']['potions'][] = associative_array('id': @id, 'strength': $strength - 1, 'seconds': $seconds);
		set_pinv(array(null: @item));
		
	} else { # create new potion
	
		@data = 16 # data effects the color of the potion
		@effectdata = array(1: 2, 2: 10, 5: 9, 6: 5, 7: 12, 10: 1, 12: 3, 14: 14, 16: 6, 18: 8);
		if(array_index_exists(@effectdata, @id)) {
			@data = @effectdata[@id]
		}
	
		set_pinv(array(null: array('type': 373, 'data': @data, 'meta': array(
			'potions': array(array('id': @id, 'strength': $strength - 1, 'seconds': $seconds))
		))));
	}
<<<
